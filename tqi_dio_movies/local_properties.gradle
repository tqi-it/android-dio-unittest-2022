def getLocalProperties() {
    def localPropsFile = file('local.properties')

    if (localPropsFile.canRead()) {
        Properties localProps = new Properties()
        localProps.load(new FileInputStream(localPropsFile))
        return localProps
    } else {
        throw new Exception("Could not read local.properties!")
    }
}

def getMovieApiKey() {
    Properties properties = getLocalProperties()
    return properties["api.key"].toString()
}

project.ext {
    getMovieApiKey = this.&getMovieApiKey
}
